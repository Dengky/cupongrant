(function(e){function t(t){for(var a,l,s=t[0],i=t[1],u=t[2],p=0,f=[];p<s.length;p++)l=s[p],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&f.push(r[l][0]),r[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);c&&c(t);while(f.length)f.shift()();return n.push.apply(n,u||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],a=!0,s=1;s<o.length;s++){var i=o[s];0!==r[i]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=o[0]))}return e}var a={},r={app:0},n=[];function l(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=a,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(o,a,function(t){return e[t]}.bind(null,a));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=i;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("router-view")],1)},n=[],l={name:"App",components:{}},s=l,i=o("2877"),u=Object(i["a"])(s,r,n,!1,null,null,null),c=u.exports,p=o("8c4f"),f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-container",[o("el-header",[e._v("优惠券发放系统")]),o("el-main",[o("el-card",{staticClass:"box-card"},[o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"消费券",name:"first"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("生成新的消费券")]),o("el-button",{attrs:{type:"primary"},on:{click:e.sendAll}},[e._v("发放所有消费券")]),o("el-dialog",{attrs:{title:"生成新的优惠券",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule}},[o("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"额度","label-width":e.formLabelWidth,prop:"value"}},[o("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),o("el-form-item",{attrs:{label:"总数量","label-width":e.formLabelWidth,prop:"amount"}},[o("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1),o("el-table",{key:e.formList.length,attrs:{data:e.formList}},[o("el-table-column",{attrs:{prop:"id",label:"编号"}}),o("el-table-column",{attrs:{prop:"name",label:"优惠券名称"}}),o("el-table-column",{attrs:{prop:"value",label:"优惠金额"}}),o("el-table-column",{attrs:{prop:"amount",label:"数量"}}),o("el-table-column",{attrs:{fixed:"right",prop:"issued",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",disabled:t.row.issued},on:{click:function(o){return e.send(t.row)}}},[e._v("发放")])]}}])})],1)],1),o("el-tab-pane",{attrs:{label:"用户",name:"second"}},[o("el-switch",{attrs:{"active-text":"只显示有优惠券的客户","inactive-text":""},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),o("el-table",{attrs:{data:e.userList}},[o("el-table-column",{attrs:{prop:"user.id",label:"ID"}}),o("el-table-column",{attrs:{prop:"user.nickname",label:"昵称"}}),o("el-table-column",{attrs:{prop:"user.phoneNumber",label:"手机号码"}}),o("el-table-column",{attrs:{prop:"couponStatistics.length",label:"优惠券数量"}})],1)],1)],1)],1)],1)],1)],1)},m=[],d=o("53ca"),b={name:"",methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return console.log("error submit!!"),!1;t.dialogFormVisible=!1,t.form.amount=parseInt(t.form.amount),t.form.value=parseInt(t.form.value),console.log(Object(d["a"])(t.form.value)),t.$http.post("/api/coupon-batches",t.form).then((function(e){console.log(e),t.$message({message:"优惠券添加成功",type:"success"}),t.$http.get("/api/coupon-batches").then((function(e){t.formList=e.data.data}))})),t.$refs[e].resetFields()}))},send:function(e){var t=this;console.log("/api/coupon-batches/"+e.id),this.$http.patch("/api/coupon-batches/"+e.id).then((function(o){console.log(o),t.$message({message:"优惠券发放成功",type:"success"}),e.issued=!0}))},sendAll:function(){var e=this,t={issued:!0};this.$http.patch("/api/coupon-batches",t).then((function(t){console.log(t),e.$message({message:"所有优惠券发放成功",type:"success"})}))}},created:function(){var e=this;this.$http.get("/api/coupon-batches").then((function(t){console.log(t.data.data),e.formList=t.data.data})).catch((function(e){console.log(e)})),this.$http.get("/api/users").then((function(t){console.log(t.data.data),e.userList=t.data.data})).catch((function(e){console.log(e)}))},data:function(){return{isDisabled:!0,activeName:"first",value1:!0,dialogFormVisible:!1,txt:["发放","未发放"],form:{name:"",value:"",amount:""},userList:[],formList:[],formLabelWidth:"120px",rule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],value:[{required:!0,message:"请输入金额",trigger:"blur"}],amount:[{required:!0,message:"请输入数量",trigger:"blur"}]}}}},h=b,v=(o("e8ac"),Object(i["a"])(h,f,m,!1,null,null,null)),g=v.exports;a["default"].use(p["a"]);var y=new p["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",component:g}]}),w=o("5c96"),x=o.n(w),$=(o("0fae"),o("bc3a")),_=o.n($);a["default"].prototype.$http=_.a,a["default"].use(x.a),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(c)},router:y}).$mount("#app")},9019:function(e,t,o){},e8ac:function(e,t,o){"use strict";o("9019")}});
//# sourceMappingURL=app.3263a721.js.map